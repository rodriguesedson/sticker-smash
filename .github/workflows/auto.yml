name: Web
on:
  push:
    branches:
      - main
  workflow_dispatch:
  
jobs:
  web:
    runs-on: ubuntu-latest
    steps:
        - uses: actions/checkout@v4
        - uses: actions/setup-node@v4
          with:
            cache: npm
        - uses: expo/expo-github-action@v8
        - with:
            expo-version: latest
        - run: npm ci
        - run: eas build --plaftorm all --non-interactive --no-wait
        - run: |
            git remote set-url origin https://git:rodriguesedson@github.com/sticker-smash.git
            npm deploy -- -u "github-actions-bot <support+actions@github.com>"